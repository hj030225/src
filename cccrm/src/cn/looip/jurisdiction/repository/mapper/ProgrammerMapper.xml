<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="cn.looip.jurisdiction.repository.dao.JurisdictionDAO" >
  <resultMap id="ProgrammerMap" type="cn.looip.jurisdiction.repository.domain.Programmer" >
    <id column="id" property="id" jdbcType="INTEGER" />
    <result column="programmer_name" property="programmerName" jdbcType="VARCHAR" />
    <result column="department" property="department" jdbcType="INTEGER" />
    <result column="programmer_sex" property="programmerSex" jdbcType="SMALLINT" />
    <result column="programmer_qq" property="programmerQq" jdbcType="VARCHAR" />
    <result column="programmer_level" property="programmerLevel" jdbcType="SMALLINT" />
    <result column="programmer_status" property="programmerStatus" jdbcType="SMALLINT" />
    <result column="login_name" property="loginName" jdbcType="VARCHAR" />
    <result column="user_mobile" property="userMobile" jdbcType="VARCHAR" />
  </resultMap>
  
 
  
 <!-- 新增程序员 -->
   <insert id="insertProgrammer1" parameterType="cn.looip.jurisdiction.repository.domain.Programmer"
   useGeneratedKeys="true" keyProperty="id">
   
    insert into programmer(programmer_name,department,programmer_sex,programmer_qq,programmer_level,programmer_status)
  	values (#{programmerName},#{department},#{programmerSex},#{programmerQq},#{programmerLevel},1);
   
   </insert>
   
  <!-- 查询程序员 -->
   <select id="getprogrammer" resultMap="ProgrammerMap" parameterType="map">
   select programmer.*,sys_user.* from programmer 
   inner join sys_user 
   on programmer.id = sys_user.user_message where sys_user.user_type = 1; 
   </select>
   
   <!-- 按条件查询程序员 -->
   <select id="searchprogrammer" resultMap="ProgrammerMap" parameterType="map">
   select programmer.*,sys_user.* from programmer 
   inner join sys_user 
   on programmer.id = sys_user.user_message 
   where sys_user.user_type = 1 
   and programmer.department = #{searchdepartment};
   </select>
   
   <!--程序员总条数  -->
    <select id="getNum" resultType="int">
    select count(*) from programmer;
    </select>
    
    <!-- 分页查询程序员 -->
    <select id="getPageProgrammer"  parameterType="int"  resultMap="ProgrammerMap" >
     select * from programmer limit  #{pagerIndex},#{pagerNum}
    </select>
    
</mapper>